import{h as C,p as U,o as a,c as l,b as o,u as e,w as u,v as g,g as d,q as L,F as M,r as T}from"./index-4UUoQKv_.js";const N={class:"container-fluid"},D={class:"row"},E={class:"col-12"},$={class:"card"},q={key:0},B=o("h3",{class:"p-1"},"Cập nhật",-1),S=[B],F={key:1},z=o("h3",{class:"p-1"},"Thêm mới",-1),G=[z],I={class:"form-horizontal"},j={class:"card-body"},A=o("h4",{class:"card-title"},null,-1),J={class:"form-group row"},K=o("label",{for:"fname",class:"col-sm-3 text-end control-label col-form-label"},"Tên ",-1),O={class:"col-sm-9"},P=["innerHTML"],Q={class:"form-group row"},R=o("label",{for:"fname",class:"col-sm-3 text-end control-label col-form-label"},"Danh mục ",-1),W={class:"col-sm-9"},X=o("option",{value:""},"Chọn",-1),Y=["value","innerHTML"],Z=["innerHTML"],ee={key:0,class:"form-group row"},oe=o("label",{for:"fname",class:"col-sm-3 text-end control-label col-form-label"},"Danh mục con ",-1),te={class:"col-sm-9"},se=o("option",{value:""},"Chọn",-1),ne=["value","innerHTML"],ae=["innerHTML"],le={class:"form-group row"},re=o("label",{for:"fname",class:"col-sm-3 text-end control-label col-form-label"},"Mô tả ",-1),ce={class:"col-sm-9"},ie=["innerHTML"],de={class:"form-group row"},_e=o("label",{for:"fname",class:"col-sm-3 text-end control-label col-form-label"},"Giá ",-1),ue={class:"col-sm-9"},pe=["innerHTML"],me=["innerHTML"],ge={__name:"EditView",setup(he){const{route:m,ref:p,loadDetail:h,handleUpdate:x,router:H,error:k,errors:r,fillErrors:w,existError:c}=C(),t=p(U);let _=p(m.params.id);const f=p([]),b=p([]);h("get","categories?no_pagi=true").then(i=>{f.value=i.data.data.data});const y=()=>{h("get","sub-categories?no_pagi=true&category_id="+t.value.category_id).then(i=>{b.value=i.data.data.data})};_.value?h("get",`products/${_.value}`).then(i=>{t.value=i.data.data,t.value.sub_category&&(t.value.category_id=t.value.sub_category.category_id,y())}):m.query.name&&(t.value.name=m.query.name);const V=()=>{let i=[t.value];_.value?i.push("put",`products/${_.value}`):i.push("post","products"),x(...i).then(()=>{H.push({name:"web-product"})}).catch(n=>{w(n,k,r,!0)})};return(i,n)=>(a(),l("div",N,[o("div",D,[o("div",E,[o("div",$,[e(_)&&e(t).id?(a(),l("div",q,S)):(a(),l("div",F,G)),o("form",I,[o("div",j,[A,o("div",J,[K,o("div",O,[u(o("input",{type:"text",class:"form-control",placeholder:"Nhập tên","onUpdate:modelValue":n[0]||(n[0]=s=>e(t).name=s)},null,512),[[g,e(t).name]]),e(c)(e(r),"name")?(a(),l("span",{key:0,class:"text-danger",innerHTML:e(c)(e(r),"name")},null,8,P)):d("",!0)])]),o("div",Q,[R,o("div",W,[u(o("select",{onChange:n[1]||(n[1]=s=>{y(),e(t).sub_category_id=""}),class:"form-control","onUpdate:modelValue":n[2]||(n[2]=s=>e(t).category_id=s)},[X,(a(!0),l(M,null,T(e(f),(s,v)=>(a(),l("option",{value:s.id,innerHTML:s.name,key:v},null,8,Y))),128))],544),[[L,e(t).category_id]]),e(c)(e(r),"category_id")?(a(),l("span",{key:0,class:"text-danger",innerHTML:e(c)(e(r),"category_id")},null,8,Z)):d("",!0)])]),e(t).category_id!=""?(a(),l("div",ee,[oe,o("div",te,[u(o("select",{class:"form-control","onUpdate:modelValue":n[3]||(n[3]=s=>e(t).sub_category_id=s)},[se,(a(!0),l(M,null,T(e(b),(s,v)=>(a(),l("option",{value:s.id,innerHTML:s.name,key:v},null,8,ne))),128))],512),[[L,e(t).sub_category_id]]),e(c)(e(r),"sub_category_id")?(a(),l("span",{key:0,class:"text-danger",innerHTML:e(c)(e(r),"sub_category_id")},null,8,ae)):d("",!0)])])):d("",!0),o("div",le,[re,o("div",ce,[u(o("textarea",{class:"form-control",name:"",id:"",rows:"3",placeholder:"Nhập mô tả","onUpdate:modelValue":n[4]||(n[4]=s=>e(t).description=s)},null,512),[[g,e(t).description]]),e(c)(e(r),"description")?(a(),l("span",{key:0,class:"text-danger",innerHTML:e(c)(e(r),"description")},null,8,ie)):d("",!0)])]),o("div",de,[_e,o("div",ue,[u(o("input",{type:"number",class:"form-control",placeholder:"Nhập giá","onUpdate:modelValue":n[5]||(n[5]=s=>e(t).price=s)},null,512),[[g,e(t).price]]),e(t).price?(a(),l("span",{key:0,class:"d-block text-danger",innerHTML:e(t).price?parseInt(e(t).price).toLocaleString():""},null,8,pe)):d("",!0),e(c)(e(r),"price")?(a(),l("span",{key:1,class:"text-danger",innerHTML:e(c)(e(r),"price")},null,8,me)):d("",!0)])])]),o("div",{class:"border-top"},[o("div",{class:"card-body"},[o("button",{onClick:V,type:"button",class:"btn btn-primary"},"Lưu")])])])])])])]))}};export{ge as default};
